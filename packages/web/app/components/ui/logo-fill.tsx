import React from 'react';
import { motion } from 'motion/react';
import type { JSX } from 'react/jsx-runtime';
import { cn } from '~/lib/utils';

type LogoFillProps = {
  percent: number;
} & JSX.IntrinsicElements['div'];

export const LogoFill: React.FC<LogoFillProps> = ({ percent, className, ...props }) => {
  // Clamp percent between 0 and 100
  const clampedPercent = Math.max(0, Math.min(100, percent));
  
  // Calculate the clip-path value (from bottom to top)
  const clipPathValue = `inset(${100 - clampedPercent}% 0 0 0)`;

  return (
    <div 
      className={cn("relative inline-block", className)} 
      style={{ filter: 'drop-shadow(16px 16px 0px rgba(255, 255, 255, 1))' }}
      {...props}
    >
      {/* Base logo - purple background with white path */}
      <svg 
        width="137" 
        height="144" 
        viewBox="0 0 137 144" 
        fill="none" 
        xmlns="http://www.w3.org/2000/svg"
        className="block"
      >
        <rect x="4" y="4" width="128.34" height="136" rx="28" fill="#7C3AED"/>
        <rect x="4" y="4" width="128.34" height="136" rx="28" stroke="#0E0C14" strokeWidth="8"/>
        <path d="M68.3561 30.6383C78.7285 30.6383 87.2544 32.7459 93.9336 36.9612C100.613 41.0984 104.031 47.2652 104.188 55.4615V56.8666H79.7894V56.3982C79.7894 54.0564 78.925 52.1049 77.1963 50.5437C75.4675 48.9825 72.8351 48.2019 69.2991 48.2019C65.8416 48.2019 63.1699 48.7093 61.284 49.7241C59.4767 50.7388 58.573 51.9878 58.573 53.471C58.573 55.5786 59.8303 57.1398 62.3448 58.1546C64.8593 59.1694 68.9062 60.2232 74.4853 61.316C81.0073 62.643 86.3507 64.0481 90.5154 65.5313C94.7587 66.9364 98.4519 69.2782 101.595 72.5567C104.738 75.8352 106.349 80.2847 106.428 85.905C106.428 95.4284 103.167 102.493 96.6446 107.098C90.2011 111.704 81.5574 114.007 70.7135 114.007C58.0623 114.007 48.2006 111.899 41.1285 107.684C34.1349 103.469 30.6382 96.0138 30.6382 85.3196H55.2727C55.2727 89.3787 56.3335 92.1108 58.4552 93.5159C60.5768 94.8429 63.8771 95.5065 68.3561 95.5065C71.6564 95.5065 74.3674 95.1552 76.489 94.4526C78.6893 93.7501 79.7894 92.306 79.7894 90.1203C79.7894 88.1688 78.5714 86.7247 76.1354 85.7879C73.7781 84.7732 69.8884 83.7193 64.4665 82.6265C57.8658 81.2214 52.4046 79.7773 48.0827 78.2941C43.7609 76.7329 39.9891 74.196 36.7673 70.6833C33.5456 67.1705 31.9347 62.4089 31.9347 56.3982C31.9347 47.5774 35.3529 41.0984 42.1893 36.9612C49.1043 32.7459 57.8265 30.6383 68.3561 30.6383Z" fill="white"/>
      </svg>

      {/* Overlay logo - white background with dark path, clipped from bottom to top with animation */}
      <motion.svg 
        width="137" 
        height="144" 
        viewBox="0 0 137 144" 
        fill="none" 
        xmlns="http://www.w3.org/2000/svg"
        className="absolute inset-0"
        animate={{ clipPath: clipPathValue }}
        transition={{ 
          duration: 0.2, 
          ease: "easeOut" 
        }}
      >
        <rect x="4" y="4" width="128.34" height="136" rx="28" fill="white"/>
        <rect x="4" y="4" width="128.34" height="136" rx="28" stroke="#0E0C14" strokeWidth="8"/>
        <path d="M68.3561 30.6383C78.7285 30.6383 87.2544 32.7459 93.9336 36.9612C100.613 41.0984 104.031 47.2652 104.188 55.4615V56.8666H79.7894V56.3982C79.7894 54.0564 78.925 52.1049 77.1963 50.5437C75.4675 48.9825 72.8351 48.2019 69.2991 48.2019C65.8416 48.2019 63.1699 48.7093 61.284 49.7241C59.4767 50.7388 58.573 51.9878 58.573 53.471C58.573 55.5786 59.8303 57.1398 62.3448 58.1546C64.8593 59.1694 68.9062 60.2232 74.4853 61.316C81.0073 62.643 86.3507 64.0481 90.5154 65.5313C94.7587 66.9364 98.4519 69.2782 101.595 72.5567C104.738 75.8352 106.349 80.2847 106.428 85.905C106.428 95.4284 103.167 102.493 96.6446 107.098C90.2011 111.704 81.5574 114.007 70.7135 114.007C58.0623 114.007 48.2006 111.899 41.1285 107.684C34.1349 103.469 30.6382 96.0138 30.6382 85.3196H55.2727C55.2727 89.3787 56.3335 92.1108 58.4552 93.5159C60.5768 94.8429 63.8771 95.5065 68.3561 95.5065C71.6564 95.5065 74.3674 95.1552 76.489 94.4526C78.6893 93.7501 79.7894 92.306 79.7894 90.1203C79.7894 88.1688 78.5714 86.7247 76.1354 85.7879C73.7781 84.7732 69.8884 83.7193 64.4665 82.6265C57.8658 81.2214 52.4046 79.7773 48.0827 78.2941C43.7609 76.7329 39.9891 74.196 36.7673 70.6833C33.5456 67.1705 31.9347 62.4089 31.9347 56.3982C31.9347 47.5774 35.3529 41.0984 42.1893 36.9612C49.1043 32.7459 57.8265 30.6383 68.3561 30.6383Z" fill="#0E0C14"/>
      </motion.svg>
    </div>
  );
};
